<div class="card mb-3" id="tweet-<%= tweet.id %>">
  <div class="card-body">
    <h5 class="card-title">
      <strong>
        <%= tweet.user.user_profile.first_name %> <%= tweet.user.user_profile.last_name %>
      </strong>
      @<%= tweet.user.user_profile.username %>
      <small>| <%= tweet.created_at&.strftime('%D') %></small>
    </h5>
    <p class="card-text"><%= tweet.content %></p>

    <h4>Comments:</h4>
    <div id="comments">
      <% if tweet.comments.any? %>
        <% tweet.comments.each do |comment| %>
          <p>
            <strong><%= comment.user.user_profile.username %></strong>: <%= comment.content %>
            <%= button_to "Delete", tweet_comment_path(tweet, comment), method: :delete, data: { confirm: "Are you sure you want to delete this comment?" }, class: "btn btn-danger btn-sm" %>
          </p>
        <% end %>
      <% else %>
        <p>No comments yet.</p>
      <% end %>
    </div>

    <h4>Add a comment</h4>
    <% if current_user %>
      <%= form_with model: [tweet, Comment.new], local: true do |f| %>
        <div class="form-group">
          <%= f.label :content, "Your Comment" %>
          <%= f.text_area :content, rows: 3, class: "form-control" %>
        </div>
        <div class="form-group">
          <%= f.submit "Post Comment", class: "btn btn-primary" %>
        </div>
      <% end %>
    <% else %>
      <p>You need to <a href="/login">log in</a> to add a comment.</p>
    <% end %>
  </div>
</div>
